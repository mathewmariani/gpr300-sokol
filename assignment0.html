<!DOCTYPE html>
<html data-bs-theme="dark">

<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="https://unpkg.com/@highlightjs/cdn-assets@11.7.0/styles/github-dark.min.css" rel="stylesheet"/>
<title>GPR-300</title>

<link href="assets/main.css" rel="stylesheet">
<script src="assets/sugar.js"></script>
</head>
<body class="container" id="top">

<main>
<article>
<h1>Assignment 0</h1>
<p class="lead">Blinn-Phong Lighting Model</p>
<p><canvas class="game" id="canvas" oncontextmenu="event.preventDefault()"></canvas></p>
<script type="text/javascript">
  var Module = {
    preRun: [],
    postRun: [],
    print: (function () {
      return function (text) {
        text = Array.prototype.slice.call(arguments).join(' ');
        console.log(text);
      };
    })(),
    printErr: function (text) {
      text = Array.prototype.slice.call(arguments).join(' ');
      console.error(text);
    },
    canvas: (function () {
      var canvas = document.getElementById('canvas');
      canvas.addEventListener("webglcontextlost", function (e) { alert('FIXME: WebGL context lost, please reload the page'); e.preventDefault(); }, false);
      return canvas;
    })(),
    setStatus: function (text) { },
    monitorRunDependencies: function (left) { },
  };
  window.onerror = function (event) {
    console.log("onerror: " + event.message);
  };
</script>
<script async type="text/javascript" src="demos/assignment0.js"></script>
</html>
<h4>Goal</h4>
<p>The goal of this assignment is setup and get comfortable with our <a href="environment.html">development environment</a>, and refamiliarize ourselves with the graphics pipeline and ImGUI by implementing the <a href="https://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_reflection_model">blinn-phong</a> reflection model with materials.</p>
<img src="images/phong-reflection-model.png" alt="Fact: This is the primary mode of transportation of the American cowboy." />
<h4>Instructions</h4>
<ol>
<li>
<p>Setup Development Environment:</p>
<ul>
<li>Follow the instructions on setting up the <a href="environment.html">development environment</a>.</li>
</ul>
</li>
<li>
<p>Shader Setup:</p>
<ul>
<li>Design a shader program that defines the visual transformations or manipulations you want to apply to the scene. The fragment shader will be responsible for the implemention of the blinn-phong relection model.</li>
</ul>
</li>
</ol>
<!-- boilerplate code -->
<pre><code class="hljs language-glsl"><span class="hljs-meta">#version 300 es</span>

<span class="hljs-keyword">out</span> <span class="hljs-type">vec4</span> FragColor;

<span class="hljs-keyword">in</span> <span class="hljs-type">vec3</span> world_position;
<span class="hljs-keyword">in</span> <span class="hljs-type">vec3</span> world_normal;

<span class="hljs-type">void</span> main() {
    <span class="hljs-type">vec3</span> normal = <span class="hljs-built_in">normalize</span>(world_normal);
    <span class="hljs-type">vec3</span> object_color = <span class="hljs-type">vec3</span>(normal * <span class="hljs-number">0.5</span> + <span class="hljs-number">0.5</span>);
    FragColor = <span class="hljs-type">vec4</span>(object_color, <span class="hljs-number">1.0</span>);
}
</code></pre>
<ol start="3">
<li>Lighting Model:
<ul>
<li>The following shader source code snippets implement the “Blinn-Phong reflectance model”, a simple lighting model that allows us to simulate how light reflects off of materials of differing roughnesses. This is achieved by combining different amounts of diffuse and specular reflection.</li>
</ul>
</li>
</ol>
<!-- structure for a light -->
<pre><code class="hljs language-glsl"><span class="hljs-comment">// An invisible static light source that shines in all directions.</span>
struct Light {
  <span class="hljs-type">float</span> brightness;
  <span class="hljs-type">vec3</span> color;
  <span class="hljs-type">vec3</span> position;
};
</code></pre>
<!-- necessary vectors -->
<pre><code class="hljs language-glsl"><span class="hljs-comment">// The angle the light ray touches the fragment.</span>
<span class="hljs-type">vec3</span> light_direction = <span class="hljs-built_in">normalize</span>(light.position - FragPos);

<span class="hljs-comment">// The angle of reflection of the light ray off the surface.</span>
<span class="hljs-type">vec3</span> reflect_direction = <span class="hljs-built_in">reflect</span>(-light_direction, normal);

<span class="hljs-comment">// The angle the looks at the fragment.</span>
<span class="hljs-type">vec3</span> camera_direction = <span class="hljs-built_in">normalize</span>(camera_position - world_position);

<span class="hljs-comment">// Exactly halfway between the camera direction and the light direction.</span>
<span class="hljs-type">vec3</span> halfway_direction = <span class="hljs-built_in">normalize</span>(light_direction + camera_direction);
</code></pre>
<!-- lighting calculations -->
<pre><code class="hljs language-glsl"><span class="hljs-type">float</span> diffuse = <span class="hljs-built_in">max</span>(<span class="hljs-built_in">dot</span>(normal, light_direction), <span class="hljs-number">0.0</span>);
<span class="hljs-type">float</span> specular = <span class="hljs-built_in">pow</span>(<span class="hljs-built_in">max</span>(<span class="hljs-built_in">dot</span>(normal, halfway_direction), <span class="hljs-number">0.0</span>), material.shininess);
</code></pre>
<ol start="3">
<li>
<p>Diffuse:</p>
<ul>
<li>Diffuse reflectance happens on very rough materials, where imperfections in the surface cause all incoming light rays to bounce in random directions. The brightness is determined solely by the dot product between the direction to the light and surface normal.</li>
</ul>
</li>
<li>
<p>Specular Reflections:</p>
<ul>
<li>Specular reflections occurs on smooth, mirror-like surfaces. The light rays reflect perfectly across the surface normal and into the viewer’s eye.</li>
</ul>
</li>
<li>
<p>Ambient Lighting:</p>
<ul>
<li>In the real world there is a lot of indirect or ambient light, where light bounces off the environment and onto surfaces from all angles. There are many ways to represent this, but the simplest is to just add some amount of constant light color to all parts of the surface.</li>
</ul>
</li>
<li>
<p>Material Properties:</p>
<ul>
<li>So far, for the sake of brevity, I have been using hard-coded values in the shader. For a proper implementation of Blinn-Phong, we should expose properties that allow us to represent different materials.</li>
</ul>
<p>We can bundle these together into a uniform struct. Kd and Ks represent the percentage of incoming light that is reflected diffusely vs specularly. To be physically correct, Kd + Ks should not exceed 1. Shininess allows us to change the size of the specular highlight. Shininess is larger for more shiny surfaces, and lower for rougher ones. <a href="http://devernay.free.fr/cours/opengl/materials.html">material properties</a></p>
</li>
</ol>
<!-- structure for a material -->
<pre><code class="hljs language-glsl">struct Material {
  <span class="hljs-type">vec3</span> ambient;
  <span class="hljs-type">vec3</span> diffuse;
  <span class="hljs-type">vec3</span> specular;
  <span class="hljs-type">float</span> shininess;
};
</code></pre>
<!-- material calculations -->
<pre><code class="hljs language-glsl"><span class="hljs-comment">// Calculate final lighting color</span>
<span class="hljs-type">vec3</span> light_color = (material.ambient + (material.diffuse * diffuse) + (material.specular * specular)) * light.color;
</code></pre>
<ol start="6">
<li>Display the Result:
<ul>
<li>Display the final result on the screen.</li>
</ul>
</li>
</ol>
<h3>Supplementary Reading</h3>
<ul>
<li><a href="https://learnopengl.com/Lighting/Basic-Lighting">LearnOpenGL - Basic-Lighting</a></li>
<li><a href="https://learnopengl.com/Lighting/Materials">LearnOpenGL - Materials</a></li>
<li><a href="https://learnopengl.com/Advanced-Lighting/Advanced-Lighting">LearnOpenGL - Advanced-Lighting</a></li>
</ul>

</article>
</main>

<footer>
<hr>
<p class="text-center text-mutes">Made with ❤️ in Montréal.</p></footer>

</body>
</html>